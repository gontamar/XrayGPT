  ğŸ“‹ Detailed Workflow: Text Processing Pipeline with Standardized Input Validation                 â”ƒ â”‚
â”‚ â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”› â”‚
â”‚                                                                                                                      â”‚
â”‚ Based on the code analysis, here's the comprehensive workflow of the text processing system:                         â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚                                              ğŸ”„ Complete Pipeline Flow                                               â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  Raw Text Input                                                                                                      â”‚
â”‚        â†“                                                                                                             â”‚
â”‚  [1] INPUT VALIDATION                                                                                                â”‚
â”‚        â†“                                                                                                             â”‚
â”‚  [2] INPUT PREPROCESSING                                                                                             â”‚
â”‚        â†“                                                                                                             â”‚
â”‚  [3] TOKENIZATION                                                                                                    â”‚
â”‚        â†“                                                                                                             â”‚
â”‚  [4] EMBEDDING GENERATION                                                                                            â”‚
â”‚        â†“                                                                                                             â”‚
â”‚  Final Output (Embeddings + Metadata)                                                                                â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                                                                      â”‚
â”‚                                      [STAGE 1] INPUT VALIDATION & PREPROCESSING                                      â”‚
â”‚                                                                                                                      â”‚
â”‚                                             ğŸ“ File: input_processor.py                                              â”‚
â”‚                                                                                                                      â”‚
â”‚                                              1.1 Configuration Loading                                               â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  # From tokenizer_config.yaml                                                                                        â”‚
â”‚  input_validation:                                                                                                   â”‚
â”‚    strict:    # Production (1-1000 chars, extensive restrictions)                                                    â”‚
â”‚    standard:  # General use (1-2000 chars, balanced restrictions)                                                    â”‚
â”‚    lenient:   # Development (0-5000 chars, minimal restrictions)                                                     â”‚
â”‚                                                                                                                      â”‚
â”‚  input_preprocessing:                                                                                                â”‚
â”‚    strict:    # Full normalization (quotes, dashes, punctuation)                                                     â”‚
â”‚    standard:  # Basic normalization (quotes, whitespace)                                                             â”‚
â”‚    minimal:   # Essential only (Unicode, whitespace)                                                                 â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚                                                1.2 Validation Process                                                â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  def validate_input(text: str, validation_profile: str = "standard") -> ValidationResult:                            â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚ Step-by-step validation:                                                                                             â”‚
â”‚                                                                                                                      â”‚
â”‚  1 Type Check: Ensure input is string                                                                                â”‚
â”‚  2 Empty Check: Verify non-empty content                                                                             â”‚
â”‚  3 Length Validation: Check min/max character limits                                                                 â”‚
â”‚  4 Character Validation: Check forbidden characters/patterns                                                         â”‚
â”‚  5 Content Validation: Verify meaningful content (if required)                                                       â”‚
â”‚  6 Format Validation: Check structure rules                                                                          â”‚
â”‚                                                                                                                      â”‚
â”‚ Validation Profiles:                                                                                                 â”‚
â”‚                                                                                                                      â”‚
â”‚  â€¢ Strict: 1-1000 chars, forbidden: @#$%^&*<>|\, requires meaningful content                                         â”‚
â”‚  â€¢ Standard: 1-2000 chars, forbidden: @#$%^&*, requires meaningful content                                           â”‚
â”‚  â€¢ Lenient: 0-5000 chars, minimal restrictions, optional content check                                               â”‚
â”‚                                                                                                                      â”‚
â”‚                                              1.3 Preprocessing Process                                               â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  def preprocess_text(text: str, preprocessing_profile: str = "standard") -> str:                                     â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚ Step-by-step preprocessing:                                                                                          â”‚
â”‚                                                                                                                      â”‚
â”‚  1 Unicode Normalization: NFC normalization                                                                          â”‚
â”‚  2 Whitespace Processing: Strip and normalize spaces                                                                 â”‚
â”‚  3 Quote Normalization: Smart quotes â†’ regular quotes                                                                â”‚
â”‚  4 Dash Normalization: Em/en dashes â†’ hyphens (strict only)                                                          â”‚
â”‚  5 Zero-width Removal: Remove invisible characters (strict only)                                                     â”‚
â”‚  6 Punctuation Normalization: Multiple punctuation â†’ single (strict only)                                            â”‚
â”‚  7 Character Repetition: Limit consecutive characters                                                                â”‚
â”‚                                                                                                                      â”‚
â”‚                                               1.4 Complete Processing                                                â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  def process_input(text: str, validation_profile: str, preprocessing_profile: str) -> ValidationResult:              â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚ Processing flow:                                                                                                     â”‚
â”‚                                                                                                                      â”‚
â”‚  1 Initial Validation â†’ Get validation result                                                                        â”‚
â”‚  2 Apply Preprocessing â†’ Clean and normalize text                                                                    â”‚
â”‚  3 Final Validation â†’ Validate processed text                                                                        â”‚
â”‚  4 Combine Results â†’ Create comprehensive result                                                                     â”‚
â”‚                                                                                                                      â”‚
â”‚ StandardizedValidationResult includes:                                                                               â”‚
â”‚                                                                                                                      â”‚
â”‚  â€¢ âœ… is_valid: Boolean validation status                                                                            â”‚
â”‚  â€¢ ğŸ“ original_text: Input text                                                                                      â”‚
â”‚  â€¢ ğŸ”„ processed_text: Cleaned text                                                                                   â”‚
â”‚  â€¢ âŒ errors: Validation errors                                                                                      â”‚
â”‚  â€¢ âš ï¸ warnings: Non-critical issues                                                                                   â”‚
â”‚  â€¢ ğŸ’¡ suggestions: Actionable recommendations                                                                        â”‚
â”‚  â€¢ ğŸ“Š processing_time_ms: Performance metrics                                                                        â”‚
â”‚  â€¢ ğŸ“ˆ original_length â†’ processed_length: Length tracking                                                            â”‚
â”‚  â€¢ ğŸ”§ validation_profile, preprocessing_profile: Configuration used                                                  â”‚
â”‚                                                                                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                                                                      â”‚
â”‚                                                [STAGE 2] TOKENIZATION                                                â”‚
â”‚                                                                                                                      â”‚
â”‚                                             ğŸ“ File: tokenizer_class.py                                              â”‚
â”‚                                                                                                                      â”‚
â”‚                                             2.1 Tokenizer Initialization                                             â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  tokenizer = Tokenizer(enable_input_processing=False)  # External processing                                         â”‚
â”‚  tokenizer.load_tokenizer('bert')  # Load BERT tokenizer                                                             â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚                                               2.2 Tokenization Process                                               â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  def tokenize(text: str, return_tensors: bool = True) -> Dict[str, Any]:                                             â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚ Tokenization steps:                                                                                                  â”‚
â”‚                                                                                                                      â”‚
â”‚  1 Load Configuration: Get BERT settings from tokenizer_config.yaml                                                  â”‚
â”‚  2 Apply Tokenizer: Use HuggingFace BERT tokenizer                                                                   â”‚
â”‚  3 Generate Tokens: Create human-readable tokens                                                                     â”‚
â”‚  4 Generate Token IDs: Create numerical token representations                                                        â”‚
â”‚  5 Create Tensors: Convert to PyTorch tensors (if requested)                                                         â”‚
â”‚                                                                                                                      â”‚
â”‚ Output includes:                                                                                                     â”‚
â”‚                                                                                                                      â”‚
â”‚  â€¢ tokens: Human-readable token list                                                                                 â”‚
â”‚  â€¢ token_ids: Numerical token representations                                                                        â”‚
â”‚  â€¢ encoded: PyTorch tensors with attention masks                                                                     â”‚
â”‚  â€¢ text: Processed input text                                                                                        â”‚
â”‚                                                                                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                                                                      â”‚
â”‚                                            [STAGE 3] EMBEDDING GENERATION                                            â”‚
â”‚                                                                                                                      â”‚
â”‚                                             ğŸ“ File: embedding_class.py                                              â”‚
â”‚                                                                                                                      â”‚
â”‚                                              3.1 Embedding Model Setup                                               â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  embedding = Embedding()                                                                                             â”‚
â”‚  embedding.load_embedding_model('bert', device='cpu')                                                                â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚                                                3.2 Embedding Creation                                                â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  def create_embeddings(text: str, device: str = 'cpu') -> Dict[str, Any]:                                            â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚ Embedding process:                                                                                                   â”‚
â”‚                                                                                                                      â”‚
â”‚  1 Tokenize Input: Use internal tokenizer for consistency                                                            â”‚
â”‚  2 Create Input Tensors: Convert to model-ready format                                                               â”‚
â”‚  3 Generate Embeddings: Pass through BERT embedding layer                                                            â”‚
â”‚  4 Return Results: Embeddings + metadata                                                                             â”‚
â”‚                                                                                                                      â”‚
â”‚ Custom BERT Embeddings:                                                                                              â”‚
â”‚                                                                                                                      â”‚
â”‚  â€¢ Word Embeddings: Token â†’ vector mapping                                                                           â”‚
â”‚  â€¢ Position Embeddings: Positional encoding                                                                          â”‚
â”‚  â€¢ Layer Normalization: Stabilize training                                                                           â”‚
â”‚  â€¢ Dropout: Regularization                                                                                           â”‚
â”‚                                                                                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                                                                      â”‚
â”‚                                             [STAGE 4] DEMO ORCHESTRATION                                             â”‚
â”‚                                                                                                                      â”‚
â”‚                                                   ğŸ“ File: demo.py                                                   â”‚
â”‚                                                                                                                      â”‚
â”‚                                                4.1 Pipeline Execution                                                â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  def main():                                                                                                         â”‚
â”‚      # Initialize components                                                                                         â”‚
â”‚      tokenizer = Tokenizer(enable_input_processing=False)                                                            â”‚
â”‚      embedding = Embedding()                                                                                         â”‚
â”‚                                                                                                                      â”‚
â”‚      # Load models                                                                                                   â”‚
â”‚      tokenizer.load_tokenizer('bert')                                                                                â”‚
â”‚      embedding.load_embedding_model('bert', device='cpu')                                                            â”‚
â”‚                                                                                                                      â”‚
â”‚      while True:                                                                                                     â”‚
â”‚          user_input = input("Enter text: ")                                                                          â”‚
â”‚                                                                                                                      â”‚
â”‚          # Step 1: Validate input                                                                                    â”‚
â”‚          processor = InputProcessor()                                                                                â”‚
â”‚          validation_result = processor.validate_input(user_input, "standard")                                        â”‚
â”‚                                                                                                                      â”‚
â”‚          if not validation_result.is_valid:                                                                          â”‚
â”‚              print(f"âœ— Invalid: {validation_result.errors}")                                                         â”‚
â”‚              print(f"ğŸ’¡ Suggestions: {validation_result.suggestions}")                                               â”‚
â”‚              continue                                                                                                â”‚
â”‚                                                                                                                      â”‚
â”‚          # Step 2: Process text                                                                                      â”‚
â”‚          processed_text = process_text(user_input)                                                                   â”‚
â”‚                                                                                                                      â”‚
â”‚          # Step 3: Tokenize                                                                                          â”‚
â”‚          tokenize_result = tokenizer.tokenize(processed_text, return_tensors=False)                                  â”‚
â”‚                                                                                                                      â”‚
â”‚          # Step 4: Generate embeddings                                                                               â”‚
â”‚          embed_result = embedding.create_embeddings(processed_text, device='cpu')                                    â”‚
â”‚                                                                                                                      â”‚
â”‚          # Display results                                                                                           â”‚
â”‚          print(f"Processed: {processed_text}")                                                                       â”‚
â”‚          print(f"Tokens: {tokenize_result['tokens']}")                                                               â”‚
â”‚          print(f"Embeddings: {embed_result['embeddings'].shape}")                                                    â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                                                                      â”‚
â”‚                                           ğŸ”§ Configuration-Driven Workflow                                           â”‚
â”‚                                                                                                                      â”‚
â”‚                                               Profile Selection Logic                                                â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  # Environment-based profile selection                                                                               â”‚
â”‚  if environment == "production":                                                                                     â”‚
â”‚      validation_profile = "strict"                                                                                   â”‚
â”‚      preprocessing_profile = "strict"                                                                                â”‚
â”‚  elif environment == "development":                                                                                  â”‚
â”‚      validation_profile = "lenient"                                                                                  â”‚
â”‚      preprocessing_profile = "minimal"                                                                               â”‚
â”‚  else:                                                                                                               â”‚
â”‚      validation_profile = "standard"                                                                                 â”‚
â”‚      preprocessing_profile = "standard"                                                                              â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚                                                 Error Handling Flow                                                  â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚  try:                                                                                                                â”‚
â”‚      # Validation                                                                                                    â”‚
â”‚      result = processor.validate_input(text, profile)                                                                â”‚
â”‚      if not result.is_valid:                                                                                         â”‚
â”‚          return result  # Early exit with errors/suggestions                                                         â”‚
â”‚                                                                                                                      â”‚
â”‚      # Processing                                                                                                    â”‚
â”‚      processed = processor.preprocess_text(text, profile)                                                            â”‚
â”‚                                                                                                                      â”‚
â”‚      # Tokenization                                                                                                  â”‚
â”‚      tokens = tokenizer.tokenize(processed)                                                                          â”‚
â”‚                                                                                                                      â”‚
â”‚      # Embedding                                                                                                     â”‚
â”‚      embeddings = embedding.create_embeddings(processed)                                                             â”‚
â”‚                                                                                                                      â”‚
â”‚  except Exception as e:                                                                                              â”‚
â”‚      # Comprehensive error handling with context                                                                     â”‚
â”‚      return error_result_with_suggestions                                                                            â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                                                                                                      â”‚
â”‚                                                 ğŸ“Š Data Flow Summary                                                 â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚   Stage           Input        Processing                   Output                                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                                       â”‚
â”‚   Validation      Raw text     Length/char/content checks   ValidationResult                                         â”‚
â”‚   Preprocessing   Raw text     Normalization/cleaning       Clean text                                               â”‚
â”‚   Tokenization    Clean text   BERT tokenizer               Tokens + IDs                                             â”‚
â”‚   Embedding       Tokens       BERT embedding layer         Vector embeddings                                        â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚                                                                                                                      â”‚
â”‚                                                   ğŸ¯ Key Features                                                    â”‚
â”‚                                                                                                                      â”‚
â”‚                                                  âœ… Standardization                                                  â”‚
â”‚                                                                                                                      â”‚
â”‚  â€¢ Consistent ValidationResult format across all operations                                                          â”‚
â”‚  â€¢ Standard validation profiles for different environments                                                           â”‚
â”‚  â€¢ Comprehensive error reporting with actionable suggestions                                                         â”‚
â”‚                                                                                                                      â”‚
â”‚                                              âœ… Performance Monitoring                                               â”‚
â”‚                                                                                                                      â”‚
â”‚  â€¢ Processing time tracking                                                                                          â”‚
â”‚  â€¢ Length change monitoring                                                                                          â”‚
â”‚  â€¢ Configuration version tracking                                                                                    â”‚
â”‚                                                                                                                      â”‚
â”‚                                                    âœ… Flexibility                                                    â”‚
â”‚                                                                                                                      â”‚
â”‚  â€¢ Multiple validation/preprocessing profiles                                                                        â”‚
â”‚  â€¢ Configurable through YAML                                                                                         â”‚
â”‚  â€¢ Environment-specific settings                                                                                     â”‚
â”‚                                                                                                                      â”‚
â”‚                                                 âœ… Production Ready                                                  â”‚
â”‚                                                                                                                      â”‚
â”‚  â€¢ Comprehensive error handling                                                                                      â”‚
â”‚  â€¢ Detailed logging and metrics                                                                                      â”‚
â”‚  â€¢ Extensible architecture                                                                                           â”‚
â”‚                                                                                                                      â”‚
â”‚ This workflow ensures robust, consistent, and traceable text processing from raw input to final embeddings with      â”‚
â”‚ comprehensive validation and preprocessing at each stage.                
